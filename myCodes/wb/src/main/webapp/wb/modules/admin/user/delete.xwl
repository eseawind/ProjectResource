{"title":"删除","inframe":false,"hidden":false,"roles":{},"pageLink":"","children":[{"configs":{"serverScript":"var userIds = [],\n  recs = Wb.decode(request.getParameter('destroy'));\n\nWb.each(recs, function(rec) {\n  if (rec.USER_ID == 'admin')\n    Wb.error('不能删除默认管理员帐户。');\n  userIds.push(rec.USER_ID);\n});\n\napp.run('delete from WB_USER where USER_ID={?USER_ID?}', {\n  arrayName: 'destroy',\n  transaction: 'start' //开始事务\n});\n\napp.run('delete from WB_USER_ROLE where USER_ID={?USER_ID?}', {\n  arrayName: 'destroy'\n});\n\nWb.each(recs, function(rec) {\n  request.setAttribute('likeId', '%@' + rec.USER_ID);\n  app.run('delete from WB_VALUE where VAL_ID like {?likeId?}');\n  app.run('delete from WB_RESOURCE where RES_ID like {?likeId?}');\n});\n\n//移除会话\ncom.wb.common.Session.removeSession(userIds);","itemId":"module"},"children":[],"type":"module","expanded":true}],"iconCls":""}