{"title":"基本对话框编辑","inframe":false,"hidden":false,"roles":{"demo":1},"pageLink":"","children":[{"configs":{"itemId":"module"},"children":[{"configs":{"title":"增删改查","height":"352","width":"664","layout":"absolute","focusControl":"STRING_FIELD","dialog":"true","itemId":"win","modal":"true","createInstance":"false"},"children":[{"configs":{"labelWidth":"90","height":"22","allowBlank":"false","width":"312","labelAlign":"right","itemId":"STRING_FIELD","fieldLabel":"* 字符串","y":"16","x":"8"},"children":[],"type":"text","expanded":false},{"configs":{"labelWidth":"90","height":"22","width":"312","labelAlign":"right","itemId":"INT_FIELD","fieldLabel":"整数","y":"16","x":"328"},"children":[],"type":"number","expanded":false},{"configs":{"labelWidth":"90","height":"22","width":"312","labelAlign":"right","itemId":"DOUBLE_FIELD","fieldLabel":"浮点数","y":"48","x":"8"},"children":[],"type":"number","expanded":false},{"configs":{"labelWidth":"90","height":"22","width":"312","labelAlign":"right","itemId":"DATETIME_FIELD","fieldLabel":"日期时间","y":"48","x":"328"},"children":[],"type":"datetime","expanded":false},{"configs":{"labelWidth":"90","keyName":"bool","height":"22","width":"312","labelAlign":"right","itemId":"BOOL_FIELD","fieldLabel":"布尔字段","y":"80","x":"8"},"children":[],"type":"combo","expanded":false},{"configs":{"labelWidth":"90","height":"162","width":"632","labelAlign":"right","itemId":"CLOB_FIELD","fieldLabel":"大文本字段","y":"120","x":"8"},"children":[],"type":"textarea","expanded":false}],"type":"window","expanded":true},{"configs":{"layout":"fit","itemId":"viewport1"},"children":[{"configs":{"multiSelect":"true","itemId":"grid1","editable":"true"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=examples/crud/crud-db-access/basic-select"},"children":[],"type":"store","expanded":false},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"添加","itemId":"newBtn","iconCls":"record_add_icon","tooltip":"添加新的记录"},"events":{"click":"var win = new Ext.window.Window(app._win); //app._win指向配置对象而非实例\nwin.show();\nwin.setIconCls('record_add_icon');\nWb.setTitle(win, '添加');\n//窗口每次动态生成,方法在窗口销毁时自动销毁\nwin.mon(win, 'ok', function() {\n  var values = Wb.getValue(win);\n  Wb.request({\n    url: 'm?xwl=examples/crud/crud-db-access/basic-insert', //使用basic-insert用于演示基本的操作，更简单的操作可使用'm?xwl=examples/crud/crud-db-access/insert'替代\n    params: values,\n    success: function(resp) {\n      Wb.apply(values, Wb.decode(resp.responseText)); //把后台返回的ID_FIELD等数据应用到values中\n      Wb.add(app.grid1, values); //同步在客户端表格中添加\n      win.close(); //根据closeAction属性，默认为销毁\n    }\n  });\n});"},"children":[],"type":"item","expanded":false},{"configs":{"text":"修改","itemId":"editBtn","iconCls":"record_edit_icon","tooltip":"修改选择的记录"},"events":{"click":"var rec = app.grid1.getSelection()[0];\nif (!rec) {\n  Wb.warn('请选择 1 条需要修改的记录。');\n  return;\n}\nvar win = new Ext.window.Window(app._win); //app._win指向配置对象而非实例\nwin.show();\nwin.setIconCls('record_edit_icon');\nWb.setTitle(win, '修改');\nWb.setValue(win, rec.data); //把记录数据应用到窗口\n//窗口每次动态生成,方法在窗口销毁时自动销毁\nwin.mon(win, 'ok', function() {\n  var values = Wb.applyIf(Wb.getValue(win), Wb.getData(rec, true)); //Wb.getData用于获取记录中的原始值，见Wb.getData方法\n  Wb.request({\n    url: 'm?xwl=examples/crud/crud-db-access/update',\n    params: values,\n    success: function(resp) {\n      Wb.update(rec, values); //同步在客户端表格中更新\n      win.close(); //根据closeAction属性，默认为销毁\n    }\n  });\n});"},"children":[],"type":"item","expanded":false},{"configs":{"text":"删除","itemId":"delBtn","iconCls":"record_delete_icon","tooltip":"删除选择的记录"},"events":{"click":"/*\n建议使用此方法：\nWb.del(app.grid1, {\n  url: 'm?xwl=examples/crud/crud-db-access/delete',\n  titleField: 'STRING_FIELD'\n});\n*/\n//使用下面方法用于演示完整的步骤\nvar recs = app.grid1.getSelection();\nif (!recs.length) {\n  Wb.warn('请选择需要删除的记录。');\n  return;\n}\nWb.confirm('确定要删除选择的 ' + recs.length + ' 条记录吗？', function() {\n  Wb.request({\n    url: 'm?xwl=examples/crud/crud-db-access/basic-delete', //使用basic-delete.xwl用于演示目的，建议使用delete.xwl\n    params: {\n      destroy: Wb.getData(recs, true)\n    },\n    success: function() {\n      Wb.remove(app.grid1, recs);\n    }\n  });\n});"},"children":[],"type":"item","expanded":false}],"type":"toolbar","expanded":true},{"configs":{"itemId":"columns"},"children":[{"configs":{"xtype":"rownumberer","itemId":"rowNumCol"},"children":[],"type":"column","expanded":false},{"configs":{"text":"字符串字段","width":"150","dataIndex":"STRING_FIELD","itemId":"stringCol"},"children":[],"type":"column","expanded":true},{"configs":{"text":"数字列","itemId":"numCols"},"children":[{"configs":{"text":"整数字段","align":"right","dataIndex":"INT_FIELD","titleAlign":"left","itemId":"intCol"},"children":[],"type":"column","expanded":true},{"configs":{"text":"浮点数字段","align":"right","dataIndex":"DOUBLE_FIELD","titleAlign":"left","itemId":"doubleCol"},"children":[],"type":"column","expanded":true}],"type":"column","expanded":true},{"configs":{"text":"布尔字段","keyName":"bool","dataIndex":"BOOL_FIELD","itemId":"boolCol"},"events":{"afterrender":"return Wb.kv();"},"children":[],"type":"column","expanded":true},{"configs":{"text":"日期时间字段","width":"170","dataIndex":"DATETIME_FIELD","itemId":"datetimeCol"},"children":[],"type":"column","expanded":true},{"configs":{"text":"大文本字段","autoWrap":"true","dataIndex":"CLOB_FIELD","itemId":"clobCol","flex":"1"},"children":[],"type":"column","expanded":true}],"type":"array","expanded":true}],"type":"grid","expanded":true}],"type":"viewport","expanded":true}],"type":"module","expanded":true}],"iconCls":""}