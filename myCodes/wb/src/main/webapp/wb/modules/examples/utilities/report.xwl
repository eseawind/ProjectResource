{"title":"报表","inframe":false,"hidden":false,"roles":{"demo":1},"pageLink":"","children":[{"configs":{"itemId":"module"},"children":[{"configs":{"itemId":"store1","url":"m?xwl=examples/utilities/report/select"},"children":[],"type":"store","expanded":false},{"configs":{"defaults":"{\n  margin: 8\n}","layout":"form","itemId":"viewport1"},"children":[{"configs":{"text":"使用A4纸(可在IDE设计菜单中设置模板纸张大小)，每页打印37条记录，包括页眉和页脚。","itemId":"label1"},"children":[],"type":"label","expanded":false},{"configs":{"text":"表格打印","width":"100","itemId":"button1"},"events":{"click":"app.store1.load({\n  limit: 1000,\n  url: 'm?xwl=examples/utilities/report/select',\n  callback: function(a, b, succ) {\n    var i = 0,\n      groupedData = [],\n      pageRows = [],\n      rows = Wb.getData(app.store1);\n    Wb.each(rows, function(row) {\n      row.rowNum = i + 1;\n      //每页显示30条记录\n      if (i > 0 && i % 30 === 0) {\n        groupedData.push({\n          pageRows: pageRows\n        });\n        pageRows = [];\n      }\n      pageRows.push(row);\n      i++;\n    });\n    groupedData.push({\n      pageRows: pageRows\n    });\n    if (succ)\n      Wb.printReport(app.reportTemplate, groupedData);\n  }\n});"},"children":[],"type":"button","expanded":false},{"configs":{"text":"格式化打印，可用于打印发票等。包含图片的打印。","itemId":"label2"},"children":[],"type":"label","expanded":false},{"configs":{"text":"套打","width":"100","itemId":"button2"},"events":{"click":"app.store1.load({\n  limit: 10,\n  url: 'm?xwl=examples/utilities/report/select',\n  callback: function(a, b, succ) {\n    if (succ)\n      Wb.printReport(app.formatTemplate, Wb.getData(app.store1));\n  }\n});"},"children":[],"type":"button","expanded":false},{"configs":{"text":"动态加载报表模板，报表模板在另一个模块内。","itemId":"label3"},"children":[],"type":"label","expanded":false},{"configs":{"text":"动态加载模板","width":"100","itemId":"button3"},"events":{"click":"app.store1.load({\n  limit: 10,\n  url: 'm?xwl=examples/utilities/report/select',\n  callback: function(a, b, succ) {\n    if (succ)\n      Wb.printReport('m?xwl=examples/utilities/report/template', Wb.getData(app.store1));\n  }\n});"},"children":[],"type":"button","expanded":false}],"type":"viewport","expanded":true},{"configs":{"height":"1012","width":"656","layout":"absolute","itemId":"reportTemplate","createInstance":"false"},"children":[{"configs":{"text":"员工信息列表","cls":"wb_line","height":"22","style":"font-size:8mm;color:red;","width":"256","labelAlign":"center","itemId":"label1","y":"8","x":"208"},"children":[],"type":"label","expanded":false},{"configs":{"text":"填报人：{#sys.dispname#}","height":"22","width":"296","itemId":"label2","y":"80","x":"16"},"children":[],"type":"label","expanded":false},{"configs":{"text":"@'填报日期：'+Wb.format(new Date(),'Y-m-d')","height":"22","width":"256","labelAlign":"right","itemId":"label3","y":"80","x":"384"},"children":[],"type":"label","expanded":false},{"configs":{"height":"864","width":"624","html":"<table class='wb_table' style='width:15cm;line-height:5.1mm;'>\n  <tr>\n    <td style='width:10mm;' align='right'><\/td>\n    <td style='width:45mm;'>姓名<\/td>\n    <td style='width:65mm;'>电子邮件<\/td>\n    <td style='width:30mm'>出生日期<\/td>\n  <\/tr>\n  <tpl for='pageRows'>\n    <tr>\n      <td align='right'>{rowNum}<\/td>\n      <td>{REAL_NAME}<\/td>\n      <td>{EMAIL}<\/td>\n      <td>{[Wb.dateToText(values.BIRTH_DATE)]}<\/td>\n    <\/tr>\n  <\/tpl>\n<\/table>","itemId":"panel1","y":"104","x":"16"},"children":[],"type":"panel","expanded":false},{"configs":{"text":"<span style=\"color:blue;\">欢迎使用打印模块<\/span>","height":"22","width":"400","itemId":"label4","y":"976","x":"16"},"children":[],"type":"label","expanded":false},{"configs":{"height":"22","width":"160","html":"欢迎使用WebBuilder","labelAlign":"right","itemId":"label5","y":"976","x":"480"},"children":[],"type":"label","expanded":false}],"type":"panel","expanded":true},{"configs":{"height":"200","width":"504","layout":"absolute","itemId":"formatTemplate","createInstance":"false"},"children":[{"configs":{"text":"套打可用于打印发票等","height":"22","width":"248","labelAlign":"center","itemId":"titleLabel","y":"8","x":"128"},"children":[],"type":"label","expanded":false},{"configs":{"text":"请在打印设置对话框中选择合适的套打纸张大小","height":"22","width":"352","labelAlign":"center","itemId":"descLabel","y":"40","x":"80"},"children":[],"type":"label","expanded":false},{"configs":{"text":"姓名：","height":"22","width":"72","itemId":"label1","y":"80","x":"16"},"children":[],"type":"label","expanded":false},{"configs":{"text":"{REAL_NAME}","height":"22","width":"224","itemId":"label2","y":"80","x":"96"},"children":[],"type":"label","expanded":false},{"configs":{"text":"电子邮件：","height":"22","width":"72","itemId":"label3","y":"120","x":"16"},"children":[],"type":"label","expanded":false},{"configs":{"text":"{EMAIL}","height":"22","width":"224","itemId":"label4","y":"120","x":"96"},"children":[],"type":"label","expanded":false},{"configs":{"text":"出生日期：","height":"22","width":"72","itemId":"label5","y":"160","x":"16"},"children":[],"type":"label","expanded":false},{"configs":{"text":"{[Wb.dateToText(values.BIRTH_DATE)]}","height":"22","width":"224","itemId":"label6","y":"160","x":"96"},"children":[],"type":"label","expanded":false},{"configs":{"height":"104","width":"120","stretch":"true","src":"wb/images/app/wb7thome.png","itemId":"image1","y":"80","x":"360"},"children":[],"type":"image","expanded":false}],"type":"panel","expanded":true}],"type":"module","expanded":true}],"iconCls":""}